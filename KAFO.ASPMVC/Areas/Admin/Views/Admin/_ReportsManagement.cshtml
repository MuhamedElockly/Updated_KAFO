@model Kafo.ASPMVC.Models.HomeViewModel

<link rel="stylesheet" href="~/css/reports.css" asp-append-version="true" />

<div class="reports-container" id="reports-management">
    <div class="reports-header">
        <h4><i class="fas fa-chart-line"></i>التقارير الإدارية</h4>
    </div>
    
    <div class="reports-buttons-grid">
                <button class="btn report-type-btn" data-report-type="profit">
            <i class="fas fa-chart-pie"></i>تقرير الأرباح المحققة
                </button>
                <button class="btn report-type-btn" data-report-type="sales">
            <i class="fas fa-chart-bar"></i>تقرير إجمالي المبيعات
                </button>
                <button class="btn report-type-btn" data-report-type="most_sold">
            <i class="fas fa-star"></i>تقرير المنتجات الأكثر طلباً
        </button>
        <button class="btn report-type-btn" data-report-type="least_sold">
            <i class="fas fa-box-open"></i>تقرير المنتجات الأقل طلباً
                </button>
                <button class="btn report-type-btn" data-report-type="most_profitable_seller">
            <i class="fas fa-user-tie"></i>تقرير أفضل البائعين أداءً
                </button>
                <button class="btn report-type-btn" data-report-type="most_profitable_product">
            <i class="fas fa-crown"></i>تقرير المنتجات الأعلى ربحية
                </button>
                <button class="btn report-type-btn" data-report-type="total_payments">
            <i class="fas fa-file-invoice"></i>تقرير إحصائيات فواتير البيع (نقدي+اجل)
                </button>
                <button class="btn report-type-btn" data-report-type="sold_products">
            <i class="fas fa-file-invoice-dollar"></i>تقرير إجمالي المشتريات
        </button>
        <button class="btn report-type-btn" data-report-type="stock_money">
            <i class="fas fa-warehouse"></i>تقرير القيمة الإجمالية للمخزون (سعر البيع)
        </button>
        <button class="btn report-type-btn" data-report-type="expected_profits">
            <i class="fas fa-chart-line"></i>تقرير الأرباح المتوقعة من المخزون
                </button>
        </div>

        <div id="report-details-section" class="report-details-section" style="display:none;">
            <h5 class="report-title" id="report-title"></h5>
            <div class="date-input-group">
                <div class="row align-items-end">
                    <div class="col-md-4">
                        <label for="reportStartDate" class="form-label">
                            <i class="fas fa-calendar-alt me-2"></i>تاريخ البدء
                        </label>
                        <input type="date" class="form-control" id="reportStartDate">
                    </div>
                    <div class="col-md-4">
                        <label for="reportEndDate" class="form-label">
                            <i class="fas fa-calendar-check me-2"></i>تاريخ الانتهاء
                        </label>
                        <input type="date" class="form-control" id="reportEndDate">
                    </div>
                    <div class="col-md-4">
                        <button class="btn generate-report-btn w-100" onclick="generateReport()">
                            <i class="fas fa-search me-2"></i>عرض التقرير
                        </button>
                    </div>
                </div>
            </div>
            <div id="report-results" class="report-results">
        </div>
    </div>
</div>

<template id="report-actions-template">
    <div class="report-actions">
        <div class="d-flex gap-2 justify-content-end">
            <button class="btn action-btn primary" onclick="downloadReportAsPDF()">
                <i class="fas fa-download me-2"></i>تحميل PDF
            </button>
            <button class="btn action-btn secondary" onclick="printReport()">
                <i class="fas fa-print me-2"></i>طباعة
            </button>
        </div>
    </div>
</template>

<script src="~/CCDN/html2pdf.bundle.min.js"></script>
<script src="~/js/admin/reports.js" asp-append-version="true"></script>
<script>
    $(document).ready(function () {
        initializeReportFunctionality();
    });
</script>